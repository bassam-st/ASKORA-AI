<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ASKORA AI</title>
  <style>
    body{font-family:system-ui;background:#0b0b12;color:#fff;max-width:820px;margin:0 auto;padding:18px}
    h1{margin:10px 0 6px;font-size:28px}
    p{margin:0 0 12px;color:#cbd5e1}
    textarea{width:100%;min-height:110px;padding:12px;border-radius:12px;border:1px solid #333;background:#0f172a;color:#fff}
    button{padding:10px 16px;border:0;border-radius:12px;background:#7c3aed;color:#fff;font-weight:700;cursor:pointer;margin-top:10px}
    button:disabled{opacity:.6;cursor:not-allowed}
    .card{margin-top:14px;padding:12px;border:1px solid #222;border-radius:12px;background:#0b1220}
    pre{white-space:pre-wrap;word-break:break-word;margin:0}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .small{font-size:13px;color:#94a3b8}
  </style>
</head>
<body>

  <h1>ASKORA AI</h1>
  <p>اسأل أي سؤال… وستحصل على جواب مباشر (بدون تسجيل دخول).</p>

  <div class="row">
    <span class="small">جرّب: ما هو الذكاء الاصطناعي؟</span>
  </div>

  <textarea id="q" placeholder="اكتب سؤالك هنا..."></textarea>
  <br />
  <button id="btn">إرسال</button>

  <div class="card">
    <pre id="out">النتيجة ستظهر هنا…</pre>
  </div>

  <script>
    const btn = document.getElementById('btn');
    const q = document.getElementById('q');
    const out = document.getElementById('out');

    btn.onclick = async () => {
      const question = (q.value || '').trim();
      if (!question) { out.textContent = "اكتب سؤال أولاً."; return; }

      btn.disabled = true;
      out.textContent = "جاري التفكير...";

      try {
        const r = await fetch('/api/askora', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ question })
        });

        const data = await r.json().catch(()=> ({}));

        if (!r.ok) {
          out.textContent = "خطأ من السيرفر:\n" + JSON.stringify(data, null, 2);
        } else {
          // نتوقع أن API يرجّع answer
          out.textContent = data.answer || JSON.stringify(data, null, 2);
        }
      } catch (e) {
        out.textContent = "خطأ اتصال: " + e.message;
      } finally {
        btn.disabled = false;
      }
    };
  </script>

</body>
</html>
